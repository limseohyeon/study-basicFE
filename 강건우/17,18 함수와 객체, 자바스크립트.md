# 자바스크립트 함수·이벤트·객체 정리

## 1. 함수 기본 개념

**함수(Function)**  
특정 작업을 수행하는 코드 블록. 필요할 때 호출해서 재사용한다.

```javascript
function sayHello() {
  console.log("Hello");
}

sayHello();  // 호출
```

- **정의(Declaration)**: `function` 키워드로 만든다.
- **호출(Call)**: `함수이름()` 형태로 실행한다.
- **매개변수(Parameter)**: 함수 선언 시 받는 값
- **인자(Argument)**: 함수 호출 시 넘기는 값
- **리턴값(Return)**: `return` 키워드로 함수 실행 결과를 반환

```javascript
function add(a, b) {
  return a + b;
}

const result = add(2, 3); // result = 5
```

---

## 2. 변수 스코프

**스코프(Scope)**: 변수가 유효한(접근 가능한) 범위

### 2-1. 전역 스코프(Global Scope)

- 어디서나 접근 가능한 변수
- `script` 전체에서 사용 가능

```javascript
let globalVar = 10;

function foo() {
  console.log(globalVar); // 10
}
```

### 2-2. 함수 스코프(Function Scope)

- 함수 내부에서 선언된 변수는 함수 안에서만 유효
- `var` 는 함수 스코프를 가진다.

```javascript
function bar() {
  var x = 5;
  console.log(x); // 5
}
console.log(x); // 에러: x is not defined
```

### 2-3. 블록 스코프(Block Scope)

- `{ }` 블록 안에서만 유효
- `let`, `const` 는 블록 스코프를 가진다.

```javascript
if (true) {
  let y = 10;
  const z = 20;
}
console.log(y); // 에러
console.log(z); // 에러
```

---

## 3. 함수 표현식(Function Expression)

함수를 **값처럼 변수에 담는 형태**

### 3-1. 함수 선언식(Function Declaration)

```javascript
function add(a, b) {
  return a + b;
}
```

- 호이스팅(hoisting) 때문에, 선언 이전에도 호출 가능

### 3-2. 함수 표현식(Function Expression)

```javascript
const add = function (a, b) {
  return a + b;
};

add(1, 2);
```

- 변수에 함수를 할당
- **호이스팅 시점에 실제 함수는 할당되지 않음**
- 그래서 **선언 이전에 호출 불가능**

```javascript
add(1, 2); // 에러: add is not a function

const add = function (a, b) {
  return a + b;
};
```

### 3-3. 화살표 함수(Arrow Function)

간결한 함수 표현식

```javascript
const add = (a, b) => {
  return a + b;
};

// 한 줄 표현
const square = x => x * x;
```

특징(간단 요약):

- `this` 바인딩 방식이 일반 함수와 다르다 (상위 스코프의 `this`를 사용)
- 주로 콜백, 간단한 함수에서 많이 사용

---

## 4. 이벤트(Event)와 이벤트 처리기(Event Handler)

**이벤트**: 브라우저에서 발생하는 모든 상호작용  
(클릭, 키보드 입력, 스크롤, 로딩 완료 등)

**이벤트 처리기(Handler)**: 이벤트 발생 시 실행할 함수

### 4-1. 대표적인 이벤트 종류

- 마우스: `click`, `dblclick`, `mousedown`, `mouseup`, `mousemove`
- 키보드: `keydown`, `keyup`, `keypress`
- 폼: `submit`, `change`, `input`, `focus`, `blur`
- 윈도우/문서: `load`, `DOMContentLoaded`, `resize`, `scroll`

### 4-2. 이벤트 등록 방법

1) **HTML 속성 방식 (권장 X)**

```html
<button onclick="handleClick()">클릭</button>

<script>
  function handleClick() {
    alert("clicked");
  }
</script>
```

2) **DOM 프로퍼티 방식**

```javascript
const btn = document.querySelector("#myBtn");

btn.onclick = function () {
  console.log("clicked");
};
```

- 단점: 같은 이벤트에 **하나의 핸들러만** 등록 가능 (덮어써짐)

3) **`addEventListener` 방식 (권장)**

```javascript
const btn = document.querySelector("#myBtn");

btn.addEventListener("click", function () {
  console.log("clicked 1");
});

btn.addEventListener("click", function () {
  console.log("clicked 2");
});
```

- 같은 이벤트에 여러 핸들러 등록 가능
- 기본 문법:  
  `element.addEventListener(이벤트이름, 콜백함수, 옵션)`

### 4-3. 이벤트 객체(Event Object)

- 이벤트 발생 시 브라우저가 핸들러에 전달하는 정보 객체

```javascript
btn.addEventListener("click", function (event) {
  console.log(event.type);  // "click"
  console.log(event.target); // 실제 클릭된 요소
});
```

주요 프로퍼티:

- `event.type` : 이벤트 종류
- `event.target` : 이벤트가 발생한 요소
- `event.currentTarget` : 핸들러가 걸린 요소
- 마우스 이벤트: `event.clientX`, `event.clientY`
- 키보드 이벤트: `event.key`, `event.code`

### 4-4. 이벤트 전파(Event Propagation)

- 이벤트는 **캡처링 → 버블링** 순으로 전파됨
- 기본적으로 버블링 단계에서 이벤트 핸들러가 실행됨

```javascript
document.body.addEventListener("click", function () {
  console.log("body clicked");
});

div.addEventListener("click", function () {
  console.log("div clicked");
});
```

강제 차단:

```javascript
element.addEventListener("click", function (event) {
  event.stopPropagation(); // 전파 중단
});
```

기본 동작 취소(링크 이동, 폼 제출 등):

```javascript
link.addEventListener("click", function (event) {
  event.preventDefault();
});
```

---

## 5. 자바스크립트와 객체(Object)

### 5-1. 객체 기본 개념

- **키-값(key-value) 쌍**의 집합
- 자바스크립트의 거의 모든 것이 객체

```javascript
const user = {
  name: "Kim",
  age: 25,
  isAdmin: true,
  sayHello: function () {
    console.log("Hello");
  },
};

console.log(user.name); // "Kim"
user.sayHello();
```

### 5-2. 프로퍼티 접근

```javascript
console.log(user.name);     // 점 표기법
console.log(user["age"]);   // 대괄호 표기법
```

- 동적으로 키를 사용할 때는 대괄호 사용

```javascript
const key = "name";
console.log(user[key]); // "Kim"
```

### 5-3. 프로퍼티 추가/수정/삭제

```javascript
const user = {};
user.name = "Lee";       // 추가
user.age = 30;           // 추가
user.age = 31;           // 수정

delete user.age;         // 삭제
```

### 5-4. 메서드(Method)

- 객체의 프로퍼티 값이 함수인 경우

```javascript
const counter = {
  value: 0,
  increment: function () {
    this.value++;
  },
};

counter.increment();
console.log(counter.value); // 1
```

`this`  
- 현재 객체를 가리키는 키워드  
- 메서드 내부에서 사용하면 **그 메서드를 소유한 객체**를 가리킨다.

---

## 6. 자바스크립트의 내장 객체(Built-in Objects)

언어 자체에서 기본 제공하는 객체들

### 6-1. Object

모든 객체의 기본 부모

주요 메서드:

```javascript
Object.keys(obj);      // 키 배열
Object.values(obj);    // 값 배열
Object.entries(obj);   // [키, 값] 배열
```

### 6-2. Array

배열 관련 기능

```javascript
const arr = [1, 2, 3];

arr.push(4);       // [1,2,3,4]
arr.pop();         // [1,2,3]
arr.shift();       // [2,3]
arr.unshift(0);    // [0,2,3]

arr.forEach(v => console.log(v));
const doubled = arr.map(v => v * 2);
const even = arr.filter(v => v % 2 === 0);
const sum = arr.reduce((acc, v) => acc + v, 0);
```

### 6-3. String

문자열 다루기

```javascript
const str = "Hello World";

str.length;             // 길이
str.toUpperCase();      // "HELLO WORLD"
str.toLowerCase();      // "hello world"
str.includes("World");  // true
str.indexOf("o");       // 4
str.slice(0, 5);        // "Hello"
str.replace("World", "JS"); // "Hello JS"
```

### 6-4. Number / Math

```javascript
const n = 3.14159;

Number.isInteger(n);   // false
n.toFixed(2);          // "3.14"
```

`Math` 객체:

```javascript
Math.round(1.6);   // 2
Math.floor(1.6);   // 1
Math.ceil(1.2);    // 2
Math.random();     // 0~1 사이 랜덤
Math.max(1, 5, 3); // 5
Math.min(1, 5, 3); // 1
```

### 6-5. Date

날짜와 시간

```javascript
const now = new Date();
const d = new Date("2024-01-01");

now.getFullYear();
now.getMonth();      // 0 ~ 11
now.getDate();       // 1 ~ 31
now.getHours();
```

### 6-6. JSON

객체 <-> JSON 문자열 변환

```javascript
const obj = { name: "Kim", age: 25 };

const jsonStr = JSON.stringify(obj); // 직렬화
const parsed = JSON.parse(jsonStr);  // 역직렬화
```

---

## 7. 브라우저 관련 객체 (BOM & DOM)

브라우저 환경에서 제공하는 기본 객체들

### 7-1. `window` 객체

- 브라우저의 최상위 객체
- 전역 변수, 전역 함수는 사실 `window`의 프로퍼티

```javascript
window.alert("Hello");
window.setTimeout(() => console.log("delay"), 1000);

// 생략 가능
alert("Hello");
setTimeout(() => console.log("delay"), 1000);
```

주요 프로퍼티/메서드:

- `window.innerWidth`, `window.innerHeight` : 뷰포트 크기
- `window.open()`, `window.close()`
- `setTimeout`, `setInterval`, `clearTimeout`, `clearInterval`
- `localStorage`, `sessionStorage`

### 7-2. `document` 객체 (DOM)

HTML 문서 자체를 나타내는 객체

```javascript
// 요소 선택
const title = document.getElementById("title");
const items = document.getElementsByClassName("item");
const first = document.querySelector(".item");
const all = document.querySelectorAll(".item");

// 내용 변경
title.textContent = "새 제목";
title.innerHTML = "<span>새 제목</span>";

// 스타일 변경
title.style.color = "red";
```

노드 생성/추가/삭제:

```javascript
const p = document.createElement("p");
p.textContent = "새 문단";

document.body.appendChild(p);          // 추가
document.body.removeChild(p);          // 삭제
```

이벤트 연결:

```javascript
const btn = document.querySelector("#btn");

btn.addEventListener("click", () => {
  alert("클릭됨");
});
```

### 7-3. `navigator` 객체

브라우저, OS 정보

```javascript
navigator.userAgent;   // 브라우저/OS 문자열
navigator.language;    // 언어
navigator.onLine;      // 온라인 여부 (true/false)
```

### 7-4. `location` 객체

현재 페이지 URL 관련

```javascript
location.href;         // 현재 URL
location.protocol;     // "https:"
location.host;         // "example.com:8080"
location.pathname;     // "/path"
location.search;       // "?id=10"
location.hash;         // "#section1"

// 페이지 이동
location.href = "https://example.com";
location.reload();     // 새로고침
```

### 7-5. `history` 객체

브라우저 방문 기록 제어

```javascript
history.back();   // 뒤로 가기
history.forward(); // 앞으로 가기
history.go(-1);   // 한 단계 뒤로
history.go(1);    // 한 단계 앞으로
```

### 7-6. `localStorage` / `sessionStorage`

브라우저에 데이터 저장

```javascript
// localStorage: 브라우저에 영구 저장 (수동 삭제 전까지 유지)
localStorage.setItem("name", "Kim");
const name = localStorage.getItem("name");
localStorage.removeItem("name");
localStorage.clear();

// sessionStorage: 탭(세션) 유지 동안만 저장
sessionStorage.setItem("token", "abc123");
sessionStorage.getItem("token");
```

---